import{j as e,r as u,s as j,b as y,bo as v,R as w,a as b,u as F,A as E}from"./index-59f2354e.js";import{L as A}from"./Layout-5ab9a001.js";import{F as a,m as C,A as P}from"./motion-db2b8b92.js";import{I as c,E as g}from"./index-dc7f8182.js";import{E as x}from"./EyeTwoTone-f6651667.js";import{G as S,p as T,C as q,c as I}from"./data-8b3ff740.js";import{C as R,A as N}from"./dto-0c8e3693.js";import{B as p}from"./button-d04776d9.js";import{n as z}from"./index-eaf1928d.js";import"./InfoCircleFilled-23b8bc08.js";import"./CloseCircleFilled-f69f152a.js";import"./collapse-97de76d4.js";import"./index-9f2fb8c4.js";import"./DownOutlined-43a19ddf.js";import"./PurePanel-e5ac0afe.js";function L(){return e.jsxs("div",{children:[e.jsx(a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"This field is required!"}],children:e.jsx(c,{placeholder:"Enter your full name",size:"large"})}),e.jsx(a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"This field is required!"},{type:"email",message:"Enter a valid email address"}],children:e.jsx(c,{placeholder:"Email Address",size:"large"})}),e.jsx(a.Item,{label:"Phone Number",name:"phone_number",rules:[{required:!0,message:"This field is required!"}],children:e.jsx(c,{placeholder:"Enter your Phone number",size:"large"})}),e.jsx(a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"This field is required!"}],children:e.jsx(c.Password,{placeholder:"Enter Password",size:"large",iconRender:r=>r?e.jsx(x,{rev:void 0}):e.jsx(g,{rev:void 0})})}),e.jsx(a.Item,{label:"Confirm Password",name:"confirm_password",rules:[{required:!0,message:"This field is required"},({getFieldValue:r})=>({validator(t,i){return!i||r("password")===i?Promise.resolve():Promise.reject(new Error("The new password that you entered do not match!"))}})],children:e.jsx(c.Password,{placeholder:"Confirm your password",size:"large",iconRender:r=>r?e.jsx(x,{rev:void 0}):e.jsx(g,{rev:void 0})})})]})}function _(){var r;return e.jsxs("div",{children:[e.jsx(a.Item,{label:"Company name",name:"company_name",rules:[{required:!0,message:"This field is required!"}],children:e.jsx(c,{placeholder:"Enter your company name",size:"large"})}),e.jsx(a.Item,{label:"Company Position",name:"company_position",rules:[{required:!0,message:"This field is required!"}],children:e.jsx(S,{options:(r=T)==null?void 0:r.map(t=>({label:t,value:t})),allowClear:!0,size:"large",placeholder:"Enter Position in Company"})}),e.jsx(q,{placeholder:"Select a country",name:"country_id",label:"Country",loading:!1,countries:I})]})}const B=({signUp:r,loading:t,errorMessage:i})=>{const[s,n]=u.useState("Form1"),[l]=a.useForm(),o=()=>{let m=s;s==="Form2"&&(m="Form1"),n(m)},d=m=>{m.preventDefault(),l.validateFields().then(()=>{let h=s;s==="Form1"&&(h="Form2"),n(h)})},f=m=>{l.validateFields().then(()=>{r(l.getFieldsValue(!0))})};return console.log(R.MD5("demo@1234").toString()),e.jsx("div",{children:e.jsxs(a,{name:"sign-form",form:l,onFinish:f,layout:"vertical",requiredMark:"optional",children:[e.jsx(C.div,{initial:{opacity:0,marginBottom:0},animate:{opacity:i?1:0,marginBottom:i?10:0},children:e.jsx(P,{type:"error",showIcon:!0,message:i})}),s==="Form1"&&e.jsx(L,{}),s==="Form2"&&e.jsx(_,{}),e.jsxs("div",{className:j("py-4  flex justify-between items-center gap-10"),children:[s=="Form2"&&e.jsx(p,{onClick:o,children:"Previous"}),s==="Form1"&&e.jsx(p,{className:"w-full",type:"primary",onClick:d,children:"Next"}),s==="Form2"&&e.jsx(p,{type:"primary",htmlType:"submit",loading:t,children:"Create"})]}),s!=="Success"&&e.jsx("div",{className:"text-center",children:e.jsxs("p",{children:["Already have an account?"," ",e.jsx(y,{to:`/${v.authPrefix}/login`,className:"font-semibold text-[#047857]",children:"Login"})]})})]})})};function M(){const[r,t]=u.useState(""),{mutate:i,isPending:s,isSuccess:n,isError:l}=w({method:"signup",model:"Accounts",onSuccess:o=>{z.success({message:"Account created successfully",placement:"topRight"})},onError:o=>{console.log(o),t(o??"Something went wrong")}});return u.useEffect(()=>{if(r){const o=setTimeout(()=>t(""),5e3);return()=>{clearTimeout(o)}}},[r]),{state:{isLoading:s,errorMessage:r,isSuccess:n,isError:l},actions:{setErrorMessage:t,createAccount:i}}}function ee(){const r=b(),{actions:{setPreviewUser:t}}=F(),[i,s]=u.useState("Create Account"),n=M(),l=o=>{const d=N(o);n.actions.createAccount({body:d},{onSuccess(){t({email:o.email,fullName:o.name}),r(E.welcome+"?isSuccess=true")}})};return e.jsx(A,{title:i,children:e.jsx(B,{signUp:l,loading:n.state.isLoading,errorMessage:n.state.errorMessage})})}export{ee as default};
