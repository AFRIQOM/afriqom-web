import{a3 as h,r as u,u as B,a2 as L}from"./index-59f2354e.js";import{g as M}from"./utils-4a35f25f.js";import{u as F}from"./useGetSubscriptionsView-43e8743f.js";const G=()=>{const{payload:a,data:c,...s}=h({model:"databoards",method:"list",dto:n=>n.map(t=>({...t,country_name:M(t.country)}))}),d=u.useMemo(()=>a?a.map(n=>({label:n.country_name,value:n.id})):[],[c]);return{databoards:a,databaordOptions:d,...s}},z=()=>{var l,g,b,m;const{state:a,actions:c}=B(),{data:s,isLoading:d,refetch:n}=F({params:{organisation_id:(l=a.currentOrganisation)==null?void 0:l.id}}),{databoards:t,isLoading:f}=G(),{data:O,isLoading:S}=L({enabled:!!((g=a.currentOrganisation)!=null&&g.id),params:{organisation_id:(b=a.currentOrganisation)==null?void 0:b.id}}),e=u.useMemo(()=>{if(!(!s||!t||!a.currentOrganisation)&&a.currentOrganisation.subscription==="Full Access")return s.find(r=>r.package==="Full Access")},[t,a.currentOrganisation,s]),o=u.useMemo(()=>!s||!t||!a.currentOrganisation?[]:t.map(r=>{const i=s.find(p=>p.databoard_id===r.id);return{...r,...i,...e&&{license:e.license,status:e.status,package:e.package},...i&&{status:c.mapAuthStatus(i.status)},databoard_id:r.id}}),[s,t]),A=((m=a.currentOrganisation)==null?void 0:m.subscription)==="Full Access",_=u.useMemo(()=>o.filter(r=>!!r.license),[o]),y=u.useMemo(()=>a.user.account_type=="Administrator"?o:o.filter(r=>{var i;return(i=a.assignedDataboard)==null?void 0:i.some(p=>p.databoard_id==r.databoard_id)}),[o]);return{fullAccess:e,refetchSubscription:n,accessibledataboards:y,organizationBoards:o,subscriptions:s,subscriptionBoards:_,databoards:t,isFullAccess:A,users:O??[],isLoading:f||d}};export{G as a,z as u};
