import{u as d,r as x,j as t,h as m,e as g,a as S,A as b}from"./index-59f2354e.js";import{P as f}from"./container-03e214f9.js";import{S as y}from"./StatusTag-0f6e5003.js";import{S as j}from"./StatusDropdown-8d57e597.js";import{g as h}from"./utils-4a35f25f.js";import{T as k}from"./Table-4c07d154.js";import{u as w}from"./useGetSubscriptionsView-43e8743f.js";import{u as I}from"./useSubscriptionMutator-52eb5755.js";import"./index-0b338665.js";import"./button-d04776d9.js";import"./index-95885a2b.js";import"./PurePanel-e5ac0afe.js";import"./DownOutlined-43a19ddf.js";import"./collapse-97de76d4.js";import"./index-9f2fb8c4.js";import"./index-dc7f8182.js";import"./CloseCircleFilled-f69f152a.js";import"./index-c51833f7.js";import"./index-eaf1928d.js";import"./InfoCircleFilled-23b8bc08.js";function _({data:i,isLoading:n,onViewDetails:o,handleStatusUpdate:r}){const{state:u}=d(),c=x.useMemo(()=>[{title:"Organisation",dataIndex:"organisation_name",key:"organisation_name"},{title:"Subscription Country",dataIndex:"country",key:"country",render:a=>t.jsx("span",{children:h(a)})},{title:"Start Date",dataIndex:"start_date",key:"start_date"},{title:"Renewal Date",dataIndex:"expiry_date",key:"expiry_date"},{title:"License",dataIndex:"license",key:"license"},{title:"Status",dataIndex:"status",key:"status",render:(a,e)=>t.jsxs("div",{className:"flex -gap-1 items-center",children:[t.jsx(y,{status:e.status})," ",t.jsx(j,{setStatus:s=>r(e,s)})]})},...m(u.user,"canViewAccountList")?[{title:"",dataIndex:"action",key:"action",render:(a,e)=>t.jsxs("div",{onClick:()=>o(e),className:"flex items-center gap-1 cursor-pointer",children:[t.jsx(g,{className:"text-blue-500"}),t.jsx("span",{className:"text-md text-blue-500",children:"View details"})]})}]:[]],[]);return t.jsx(t.Fragment,{children:t.jsx(k,{scroll:{x:900},columns:c,loading:n,dataSource:i,pagination:!1})})}function H(){const i=S(),{user:n}=d().state,{data:o,isLoading:r,refetch:u}=w({params:{"status:in":m(n,"canApproveAccountSubscription")?"approval request,pending":"pending"}}),{state:c,actions:p}=I(),a=s=>{i(`${b.previewOrganization}/?${s.organisation_id}`)},e=(s,l)=>{p.updateSubscription({id:s.id,body:{status:l}},{onSuccess(){u()}})};return t.jsx(f,{title:"Manage Subscription Requests",children:t.jsx(_,{data:o,isLoading:r||c.isUpdating,handleStatusUpdate:e,onViewDetails:a})})}export{H as default};
